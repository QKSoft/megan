(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[7],{1021:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(469);function r(e){return Object(c.a)({},e)}},1056:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(988),r=n(16);function a(e,t){Object(r.a)(2,arguments);var n=Object(c.a)(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},1096:function(e,t,n){var c=n(610);e.exports=function(e,t){var n=-1,r=e.length,a=r-1;for(t=void 0===t?r:t;++n<t;){var i=c(n,a),o=e[i];e[i]=e[n],e[n]=o}return e.length=t,e}},1296:function(e,t,n){var c=n(1297),r=n(1298),a=n(55);e.exports=function(e){return(a(e)?c:r)(e)}},1297:function(e,t,n){var c=n(461),r=n(1096);e.exports=function(e){return r(c(e))}},1298:function(e,t,n){var c=n(1096),r=n(611);e.exports=function(e){return c(r(e))}},1525:function(e,t,n){"use strict";n.r(t);var c,r,a,i,o,s,l,u=n(0),b=n(84),d=n(86),j=n(299),p=n(303),f=n(949),O=n(466),m=n.n(O),x=n(116),h=n(229),v=n(27),g=n(129),S=(n(39),n(62)),y=function(){return Object(v.c)((function(e){return e.nftMarket.data.collections}))},C=function(){return Object(v.c)((function(e){return e.nftMarket.data.user}))},k=n(210),w=function(){var e,t=Object(x.b)(),n=Object(b.c)().account,c=Object(p.c)(),r=c.profile,a=c.isInitialized,i=c.isLoading,o=C().userNftsInitializationState,s=y(),l=null===r||void 0===r?void 0:r.tokenId,d=null===r||void 0===r||null===(e=r.tokenId)||void 0===e?void 0:e.toString(),j=null===r||void 0===r?void 0:r.collectionAddress,f=Object(u.useMemo)((function(){return l?{tokenId:d,collectionAddress:j,nftLocation:S.e.PROFILE}:null}),[d,j,l]),O=Object(k.a)(d),v=n&&o===S.f.UNINITIALIZED&&a&&!i,g=O!==d&&!i&&n;Object(u.useEffect)((function(){!v&&!g||m()(s)||t(Object(h.e)({account:n,collections:s,profileNftWithCollectionAddress:f}))}),[t,n,v,g,d,s,f])},I=n(13),A=n(7),E=n(2),D=n(20),N=n(3),T=n.n(N),P=n(12),L=n(10),M=n(5),_=n(44),R=n(166),z=Object(R.parseUnits)("1"),q=Object(R.parseUnits)("0.5"),F=["5","6","7","8","9"],U=n(1),Y=z.add(q),W=Y.mul(5),X={isInitialized:!1,currentStep:0,teamId:null,selectedNft:{collectionAddress:null,tokenId:null},userName:"",minimumCakeRequired:Y,allowance:W},J=function(e,t){switch(t.type){case"initialize":return Object(M.a)(Object(M.a)({},e),{},{isInitialized:!0,currentStep:t.step});case"next_step":return Object(M.a)(Object(M.a)({},e),{},{currentStep:e.currentStep+1});case"set_team":return Object(M.a)(Object(M.a)({},e),{},{teamId:t.teamId});case"set_selected_nft":return Object(M.a)(Object(M.a)({},e),{},{selectedNft:{tokenId:t.tokenId,collectionAddress:t.collectionAddress}});case"set_username":return Object(M.a)(Object(M.a)({},e),{},{userName:t.userName});default:return e}},H=Object(u.createContext)(null),K=function(e){var t=e.children,n=Object(u.useReducer)(J,X),c=Object(L.a)(n,2),r=c[0],a=c[1],i=Object(b.c)().account;Object(u.useEffect)((function(){var e=!0;return i&&function(){var t=Object(P.a)(T.a.mark((function t(){var n,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(_.c)(),t.next=3,n.canMint(i);case 3:c=t.sent,a({type:"initialize",step:c?0:1}),e&&a({type:"initialize",step:c?0:1});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[i,a]);var o=Object(u.useMemo)((function(){return{nextStep:function(){return a({type:"next_step"})},setTeamId:function(e){return a({type:"set_team",teamId:e})},setSelectedNft:function(e,t){return a({type:"set_selected_nft",tokenId:e,collectionAddress:t})},setUserName:function(e){return a({type:"set_username",userName:e})}}}),[a]);return Object(U.jsx)(H.Provider,{value:Object(M.a)(Object(M.a)({},r),{},{actions:o}),children:t})},Q=A.e.div(c||(c=Object(I.a)(["\n  border-bottom: 2px solid ",";\n  margin-top: 32px;\n  margin-bottom: 24px;\n  padding-bottom: 24px;\n"])),(function(e){return e.theme.colors.textSubtle})),G=["Get Starter Collectible","Set Profile Picture","Join Team","Set Name"],B=function(){var e=Object(D.b)().t,t=Object(u.useContext)(H).currentStep;return Object(U.jsxs)(Q,{children:[Object(U.jsx)(E.cb,{as:"h1",scale:"xxl",color:"secondary",mb:"8px",id:"profile-setup-title",children:e("Profile Setup")}),Object(U.jsx)(E.cb,{as:"h2",scale:"lg",mb:"8px",children:e("Show off your stats and collectibles with your unique profile")}),Object(U.jsx)(E.pc,{color:"textSubtle",mb:"8px",children:e("Total cost: 1.5 CAKE")}),Object(U.jsx)(E.nb,{href:"".concat(g.a,"/profile"),children:Object(U.jsx)(E.t,{mb:"24px",scale:"sm",variant:"secondary",children:e("Back to profile")})}),Object(U.jsx)(E.q,{children:G.map((function(n,c){return Object(U.jsx)(E.pc,{color:c<=t?"text":"textDisabled",children:e(n)},n)}))})]})},Z=n(180),V=function(){var e=Object(D.b)().t;return Object(U.jsxs)("div",{children:[Object(U.jsx)(E.cb,{scale:"xl",mb:"8px",children:e("Oops!")}),Object(U.jsx)(E.pc,{as:"p",mb:"16px",children:e("Please connect your wallet to continue")}),Object(U.jsx)(Z.a,{})]})},$=n(947),ee=n(80),te=n(142),ne=n(302),ce=n(956),re=n(224),ae=n(76),ie=n(69),oe=["name","value","isChecked","image","onChange","disabled","children"],se=A.e.label(r||(r=Object(I.a)(["\n  cursor: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  opacity: ",";\n"])),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return e.isDisabled?"0.6":"1"})),le=A.e.div(a||(a=Object(I.a)(["\n  align-items: center;\n  display: flex;\n  flex-grow: 1;\n  height: 80px;\n  padding: 8px 16px;\n"]))),ue=A.e.div(i||(i=Object(I.a)(["\n  margin-left: 16px;\n"]))),be=A.e.div(o||(o=Object(I.a)(["\n  align-self: stretch;\n  background-image: url('","');\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  flex: none;\n  width: 80px;\n"])),(function(e){return e.src})),de=function(e){var t=e.name,n=e.value,c=e.isChecked,r=void 0!==c&&c,a=e.image,i=e.onChange,o=e.disabled,s=e.children,l=Object(ie.a)(e,oe);return Object(U.jsx)(E.w,Object(M.a)(Object(M.a)({isSuccess:r,isDisabled:o,mb:"16px"},l),{},{children:Object(U.jsxs)(se,{isDisabled:o,children:[Object(U.jsxs)(le,{children:[Object(U.jsx)(E.Sb,{name:t,checked:r,value:n,onChange:function(e){return i(e.target.value)},disabled:o,style:{flex:"none"}}),Object(U.jsx)(ue,{children:s})]}),Object(U.jsx)(be,{src:a})]})}))},je=function(e){return Object(U.jsx)(E.t,Object(M.a)({endIcon:Object(U.jsx)(E.f,{color:"currentColor"})},e))},pe=function(){return Object(u.useContext)(H)},fe=function(){var e=Object(u.useState)(""),t=Object(L.a)(e,2),n=t[0],c=t[1],r=Object(u.useState)([]),a=Object(L.a)(r,2),i=a[0],o=a[1],s=pe(),l=s.actions,d=s.minimumCakeRequired,j=s.allowance,p=y(),f=Object(re.a)().toastSuccess,O=Object(x.b)(),m=Object(b.c)().account,v=Object(ee.d)(),S=Object(ee.b)(),C=Object(D.b)().t,k=Object(te.d)(),w=k.balance,I=k.fetchStatus===te.a.SUCCESS&&w.gte(z),A=Object(ne.a)().callWithGasPrice;Object(u.useEffect)((function(){var e=function(){var e=Object(P.a)(T.a.mark((function e(){var t,n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.m)(g.b);case 2:t=e.sent,n=t.data,c=F.map((function(e){if(n&&n[e])return Object(M.a)(Object(M.a)({},n[e]),{},{bunnyId:e})})),o(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===i.length&&e()}),[i]);var N=Object($.a)({onRequiresApproval:function(){var e=Object(P.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.allowance(m,S.address);case 3:return t=e.sent,e.abrupt("return",t.gte(d));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){return A(v,"approve",[S.address,j.toString()])},onConfirm:function(){return A(S,"mintNFT",[n])},onApproveSuccess:function(){f(C("Enabled"),C("Press 'confirm' to mint this NFT"))},onSuccess:function(){f(C("Success"),C("You have minted your starter NFT")),O(Object(h.e)({account:m,collections:p})),l.nextStep()}}),_=N.isApproving,q=N.isApproved,Y=N.isConfirmed,W=N.isConfirming,X=N.handleApprove,J=N.handleConfirm;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.pc,{fontSize:"20px",color:"textSubtle",bold:!0,children:C("Step %num%",{num:1})}),Object(U.jsx)(E.cb,{as:"h3",scale:"xl",mb:"24px",children:C("Get Starter Collectible")}),Object(U.jsx)(E.pc,{as:"p",children:C("Every profile starts by making a \u201cstarter\u201d collectible (NFT).")}),Object(U.jsx)(E.pc,{as:"p",children:C("This starter will also become your first profile picture.")}),Object(U.jsx)(E.pc,{as:"p",mb:"24px",children:C("You can change your profile pic later if you get another approved Pancake Collectible.")}),Object(U.jsx)(E.w,{mb:"24px",children:Object(U.jsxs)(E.x,{children:[Object(U.jsx)(E.cb,{as:"h4",scale:"lg",mb:"8px",children:C("Choose your Starter!")}),Object(U.jsx)(E.pc,{as:"p",color:"textSubtle",children:C("Choose wisely: you can only ever make one starter collectible!")}),Object(U.jsx)(E.pc,{as:"p",mb:"24px",color:"textSubtle",children:C("Cost: %num% CAKE",{num:Object(R.formatUnits)(z)})}),i.map((function(e){return Object(U.jsx)(de,{name:"mintStarter",value:null===e||void 0===e?void 0:e.bunnyId,image:null===e||void 0===e?void 0:e.image.thumbnail,isChecked:n===(null===e||void 0===e?void 0:e.bunnyId),onChange:function(e){return c(e)},disabled:_||W||Y||!I,children:Object(U.jsx)(E.pc,{bold:!0,children:null===e||void 0===e?void 0:e.name})},null===e||void 0===e?void 0:e.name)})),!I&&Object(U.jsx)(E.pc,{color:"failure",mb:"16px",children:C("A minimum of %num% CAKE is required",{num:Object(R.formatUnits)(z)})}),Object(U.jsx)(ce.b,{isApproveDisabled:null===n||Y||W||q,isApproving:_,isConfirmDisabled:!q||Y||!I,isConfirming:W,onApprove:X,onConfirm:J})]})}),Object(U.jsx)(je,{onClick:l.nextStep,disabled:!Y,children:C("Next Step")})]})},Oe=n(106),me=n(41),xe=Object(A.e)(Oe.a)(s||(s=Object(I.a)(["\n  color: ",";\n"])),(function(e){return e.theme.colors.primary})),he=A.e.div(l||(l=Object(I.a)(["\n  margin-bottom: 24px;\n"]))),ve=function(){var e=Object(b.c)().library,t=Object(u.useState)(!1),n=Object(L.a)(t,2),c=n[0],r=n[1],a=Object(u.useState)(!1),i=Object(L.a)(a,2),o=i[0],s=i[1],l=Object(u.useContext)(H),d=l.selectedNft,j=l.actions,p=C(),f=p.nfts,O=p.userNftsInitializationState;w();var m=Object(D.b)().t,x=Object(re.a)(),h=x.toastError,v=x.toastSuccess,y=Object(ne.a)().callWithGasPrice,k=function(){var t=Object(P.a)(T.a.mark((function t(){var n,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(_.n)(d.collectionAddress,e.getSigner()),t.next=3,y(n,"approve",[Object(me.r)(),d.tokenId]);case 3:return c=t.sent,s(!0),t.next=7,c.wait();case 7:t.sent.status?(v(m("Enabled"),m("Please progress to the next step.")),s(!1),r(!0)):(h(m("Error"),m("Please try again. Confirm the transaction and make sure you are paying enough gas!")),s(!1));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return 0===f.length&&O===S.f.INITIALIZED?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.cb,{scale:"xl",mb:"24px",children:m("Oops!")}),Object(U.jsx)(E.pc,{bold:!0,fontSize:"20px",mb:"24px",children:m("We couldn\u2019t find any Pancake Collectibles in your wallet.")}),Object(U.jsx)(E.pc,{as:"p",children:m("You need a Pancake Collectible to finish setting up your profile. If you sold or transferred your starter collectible to another wallet, you\u2019ll need to get it back or acquire a new one somehow. You can\u2019t make a new starter with this wallet address.")})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.pc,{fontSize:"20px",color:"textSubtle",bold:!0,children:m("Step %num%",{num:2})}),Object(U.jsx)(E.cb,{as:"h3",scale:"xl",mb:"24px",children:m("Set Profile Picture")}),Object(U.jsx)(E.w,{mb:"24px",children:Object(U.jsxs)(E.x,{children:[Object(U.jsx)(E.cb,{as:"h4",scale:"lg",mb:"8px",children:m("Choose collectible")}),Object(U.jsx)(E.pc,{as:"p",color:"textSubtle",children:m("Choose a profile picture from the eligible collectibles (NFT) in your wallet, shown below.")}),Object(U.jsxs)(E.pc,{as:"p",color:"textSubtle",mb:"24px",children:[m("Only approved Pancake Collectibles can be used."),Object(U.jsx)(xe,{to:"".concat(g.a,"/collections"),style:{marginLeft:"4px"},children:m("See the list >")})]}),Object(U.jsx)(he,{children:f.filter((function(e){return e.location===S.e.WALLET})).map((function(e){return Object(U.jsx)(de,{name:"profilePicture",value:e.tokenId,image:e.image.thumbnail,isChecked:e.tokenId===d.tokenId,onChange:function(t){return j.setSelectedNft(t,e.collectionAddress)},children:Object(U.jsx)(E.pc,{bold:!0,children:e.name})},"".concat(e.collectionAddress,"#").concat(e.tokenId))}))}),Object(U.jsx)(E.cb,{as:"h4",scale:"lg",mb:"8px",children:m("Allow collectible to be locked")}),Object(U.jsx)(E.pc,{as:"p",color:"textSubtle",mb:"16px",children:m("The collectible you've chosen will be locked in a smart contract while it\u2019s being used as your profile picture. Don't worry - you'll be able to get it back at any time.")}),Object(U.jsx)(E.t,{isLoading:o,disabled:c||o||null===d.tokenId,onClick:k,endIcon:o?Object(U.jsx)(E.i,{spin:!0,color:"currentColor"}):void 0,id:"approveStarterCollectible",children:m("Enable")})]})}),Object(U.jsx)(je,{onClick:j.nextStep,disabled:null===d.tokenId||!c||o,children:m("Next Step")})]})},ge=n(1296),Se=n.n(ge),ye=n(973),Ce=function(){var e=pe(),t=e.teamId,n=e.actions,c=Object(D.b)().t,r=Object(ye.b)().teams,a=function(e){return n.setTeamId(parseInt(e,10))},i=Object(u.useMemo)((function(){return Se()(Object.values(r))}),[r]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.pc,{fontSize:"20px",color:"textSubtle",bold:!0,children:c("Step %num%",{num:3})}),Object(U.jsx)(E.cb,{as:"h3",scale:"xl",mb:"24px",children:c("Join a Team")}),Object(U.jsx)(E.pc,{as:"p",mb:"24px",children:c("It won\u2019t be possible to undo the choice you make for the foreseeable future!")}),Object(U.jsx)(E.w,{mb:"24px",children:Object(U.jsxs)(E.x,{children:[Object(U.jsx)(E.cb,{as:"h4",scale:"lg",mb:"8px",children:c("Join a Team")}),Object(U.jsx)(E.pc,{as:"p",color:"textSubtle",mb:"24px",children:c("There\u2019s currently no big difference between teams, and no benefit of joining one team over another for now. So pick whichever one you like!")}),i&&i.map((function(e){return Object(U.jsxs)(de,{name:"teams-selection",value:e.id,isChecked:t===e.id,image:"/images/teams/".concat(e.images.md),onChange:a,disabled:!e.isJoinable,children:[Object(U.jsx)(E.pc,{bold:!0,children:e.name}),Object(U.jsxs)(E.ab,{children:[Object(U.jsx)(E.P,{mr:"8px"}),Object(U.jsx)(E.pc,{children:e.users.toLocaleString()})]})]},e.name)}))]})}),Object(U.jsx)(je,{onClick:n.nextStep,disabled:null===t,children:c("Next Step")})]})},ke=n(997),we=n(21),Ie=n(613),Ae=n(16),Ee=n(614),De=n(615);function Ne(e){Object(Ae.a)(1,arguments);var t=Object(we.default)(e);return Object(Ee.default)(t).getTime()===Object(De.default)(t).getTime()}function Te(e,t){Object(Ae.a)(2,arguments);var n,c=Object(we.default)(e),r=Object(we.default)(t),a=Object(ke.a)(c,r),i=Math.abs(Object(Ie.default)(c,r));if(i<1)n=0;else{1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-a*i);var o=Object(ke.a)(c,r)===-a;Ne(Object(we.default)(e))&&1===i&&1===Object(ke.a)(e,r)&&(o=!1),n=a*(i-Number(o))}return 0===n?0:n}var Pe=n(1056),Le=n(326),Me=n(1021),_e=n(154),Re=1440,ze=43200;function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ae.a)(2,arguments);var c=n.locale||Le.a;if(!c.formatDistance)throw new RangeError("locale must contain formatDistance property");var r=Object(ke.a)(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var a,i,o=Object(Me.a)(n);o.addSuffix=Boolean(n.addSuffix),o.comparison=r,r>0?(a=Object(we.default)(t),i=Object(we.default)(e)):(a=Object(we.default)(e),i=Object(we.default)(t));var s,l=Object(Pe.a)(i,a),u=(Object(_e.a)(i)-Object(_e.a)(a))/1e3,b=Math.round((l-u)/60);if(b<2)return n.includeSeconds?l<5?c.formatDistance("lessThanXSeconds",5,o):l<10?c.formatDistance("lessThanXSeconds",10,o):l<20?c.formatDistance("lessThanXSeconds",20,o):l<40?c.formatDistance("halfAMinute",null,o):l<60?c.formatDistance("lessThanXMinutes",1,o):c.formatDistance("xMinutes",1,o):0===b?c.formatDistance("lessThanXMinutes",1,o):c.formatDistance("xMinutes",b,o);if(b<45)return c.formatDistance("xMinutes",b,o);if(b<90)return c.formatDistance("aboutXHours",1,o);if(b<Re){var d=Math.round(b/60);return c.formatDistance("aboutXHours",d,o)}if(b<2520)return c.formatDistance("xDays",1,o);if(b<ze){var j=Math.round(b/Re);return c.formatDistance("xDays",j,o)}if(b<86400)return s=Math.round(b/ze),c.formatDistance("aboutXMonths",s,o);if((s=Te(i,a))<12){var p=Math.round(b/ze);return c.formatDistance("xMonths",p,o)}var f=s%12,O=Math.floor(s/12);return f<3?c.formatDistance("aboutXYears",O,o):f<9?c.formatDistance("overXYears",O,o):c.formatDistance("almostXYears",O+1,o)}var Fe,Ue,Ye,We,Xe=n(863),Je=n(53),He=n(170),Ke=["timeout"],Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.timeout,c=void 0===n?1e4:n,r=Object(ie.a)(t,Ke);return Promise.race([fetch(e,r),new Promise((function(t,n){setTimeout((function(){n(new Error("Request for ".concat(e," timed out after ").concat(c," milliseconds")))}),c)}))])},Ge=n(22),Be=n(143),Ze=n(205),Ve=function(e){var t=e.account,n=e.teamId,c=e.selectedNft,r=e.minimumCakeRequired,a=e.allowance,i=e.onDismiss,o=Object(D.b)().t,s=Object(ee.o)(),l=Object(x.b)(),u=Object(re.a)().toastSuccess,b=Object(ee.d)(),d=Object(ne.a)().callWithGasPrice,j=Object($.a)({onRequiresApproval:function(){var e=Object(P.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.allowance(t,s.address);case 3:return n=e.sent,e.abrupt("return",n.gte(r));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),onApprove:function(){return d(b,"approve",[s.address,a.toJSON()])},onConfirm:function(){return d(s,"createProfile",[n,c.collectionAddress,c.tokenId])},onSuccess:function(){var e=Object(P.a)(T.a.mark((function e(n){var c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.receipt,e.next=3,l(Object(Be.b)(t));case 3:i(),u(o("Profile created!"),Object(U.jsx)(Ze.b,{txHash:c.transactionHash}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),p=j.isApproving,f=j.isApproved,O=j.isConfirmed,m=j.isConfirming,h=j.handleApprove,v=j.handleConfirm;return Object(U.jsxs)(E.zb,{title:o("Complete Profile"),onDismiss:i,children:[Object(U.jsx)(E.pc,{color:"textSubtle",mb:"8px",children:o("Submitting NFT to contract and confirming User Name and Team.")}),Object(U.jsxs)(E.ab,{justifyContent:"space-between",mb:"16px",children:[Object(U.jsx)(E.pc,{children:o("Cost")}),Object(U.jsx)(E.pc,{children:o("%num% CAKE",{num:Object(R.formatUnits)(q)})})]}),Object(U.jsx)(ce.b,{isApproveDisabled:O||m||f,isApproving:p,isConfirmDisabled:!f||O,isConfirming:m,onApprove:h,onConfirm:v})]})},$e=n(153);!function(e){e.IDLE="idle",e.CREATED="created",e.NEW="new"}(We||(We={}));var et=A.e.div(Fe||(Fe=Object(I.a)(["\n  position: relative;\n  max-width: 240px;\n"]))),tt=Object(A.e)(E.ib)(Ue||(Ue=Object(I.a)(["\n  padding-right: 40px;\n"]))),nt=Object(A.e)(E.ab)(Ye||(Ye=Object(I.a)(["\n  align-items: center;\n  height: 24px;\n  justify-content: center;\n  margin-top: -12px;\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  width: 24px;\n"]))),ct=function(){var e=Object(u.useState)(!1),t=Object(L.a)(e,2),n=t[0],c=t[1],r=pe(),a=r.teamId,i=r.selectedNft,o=r.userName,s=r.actions,l=r.minimumCakeRequired,d=r.allowance,j=Object(D.b)().t,p=Object(b.c)().account,f=Object(re.a)().toastError,O=Object(Ge.a)().library,m=Object(u.useState)(We.IDLE),x=Object(L.a)(m,2),h=x[0],v=x[1],g=Object(u.useState)(!1),S=Object(L.a)(g,2),y=S[0],C=S[1],k=Object(u.useState)(!1),w=Object(L.a)(k,2),I=w[0],A=w[1],N=Object(u.useState)(""),M=Object(L.a)(N,2),_=M[0],z=M[1],F=Object(u.useRef)(null),Y=Object(te.d)(),W=Y.balance,X=Y.fetchStatus===te.a.SUCCESS&&W.gte(q),J=Object(E.Qc)(Object(U.jsx)(Ve,{userName:o,selectedNft:i,account:p,teamId:a,minimumCakeRequired:l,allowance:d}),!1),H=Object(L.a)(J,1)[0],K=h===We.CREATED,Q=Object(u.useState)(void 0),G=Object(L.a)(Q,2),B=G[0],Z=G[1],V=Object($e.a)(B,200);Object(u.useEffect)((function(){var e=function(){var e=Object(P.a)(T.a.mark((function e(t){var n,c,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,A(!0),V){e.next=8;break}C(!1),z(""),F.current=null,e.next=22;break;case 8:return e.next=10,Qe("".concat(Je.b,"/api/users/valid/").concat(V),{method:"get",signal:t,timeout:3e4});case 10:if(n=e.sent,F.current=null,!n.ok){e.next=17;break}C(!0),z(""),e.next=22;break;case 17:return e.next=19,n.json();case 19:r=e.sent,C(!1),z(null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.message);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),C(!1),"AbortError"!==e.t0.name&&(z(j("Error fetching data")),console.error(e.t0));case 28:return e.prev=28,A(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[0,24,28,31]])})));return function(t){return e.apply(this,arguments)}}();F.current&&F.current.abort(),F.current=new AbortController,e(F.current.signal)}),[V,j]);var $=function(){var e=Object(P.a)(T.a.mark((function e(){var t,n,c,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),e.next=4,Object(He.c)(O,p,o);case 4:return t=e.sent,e.next=7,fetch("".concat(Je.b,"/api/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:p,username:o,signature:t})});case 7:if(!(n=e.sent).ok){e.next=12;break}v(We.CREATED),e.next=16;break;case 12:return e.next=14,n.json();case 14:r=e.sent,f(j("Error"),null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.message);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),f((null===e.t0||void 0===e.t0?void 0:e.t0.message)?e.t0.message:JSON.stringify(e.t0));case 21:return e.prev=21,A(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){p&&function(){var e=Object(P.a)(T.a.mark((function e(){var t,n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Je.b,"/api/users/").concat(p));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,t.ok?(c=qe(Object(Xe.default)(n.created_at),new Date),z(j("Created %dateCreated% ago",{dateCreated:c})),s.setUserName(n.username),v(We.CREATED),C(!0)):v(We.NEW),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),f(j("Error"),j("Unable to verify username"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[p,v,C,z,s,f,j]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.pc,{fontSize:"20px",color:"textSubtle",bold:!0,children:j("Step %num%",{num:4})}),Object(U.jsx)(E.cb,{as:"h3",scale:"xl",mb:"24px",children:j("Set Your Name")}),Object(U.jsx)(E.pc,{as:"p",mb:"24px",children:j("This name will be shown in team leaderboards and search results as long as your profile is active.")}),Object(U.jsx)(E.w,{mb:"24px",children:Object(U.jsxs)(E.x,{children:[Object(U.jsx)(E.cb,{as:"h4",scale:"lg",mb:"8px",children:j("Set Your Name")}),Object(U.jsx)(E.pc,{as:"p",color:"textSubtle",mb:"24px",children:j("Your name must be at least 3 and at most 15 standard letters and numbers long. You can\u2019t change this once you click Confirm.")}),h===We.IDLE?Object(U.jsx)(E.Yb,{height:"40px",width:"240px"}):Object(U.jsxs)(et,{children:[Object(U.jsx)(tt,{onChange:function(e){var t=e.target.value;s.setUserName(t),Z(t)},isWarning:o&&!y,isSuccess:o&&y,minLength:3,maxLength:15,disabled:K,placeholder:j("Enter your name..."),value:o}),Object(U.jsxs)(nt,{children:[I&&Object(U.jsx)(E.i,{spin:!0}),!I&&y&&o&&Object(U.jsx)(E.H,{color:"success"}),!I&&!y&&o&&Object(U.jsx)(E.Hc,{color:"failure"})]})]}),Object(U.jsx)(E.pc,{color:"textSubtle",fontSize:"14px",py:"4px",mb:"16px",style:{minHeight:"30px"},children:_}),Object(U.jsx)(E.pc,{as:"p",color:"failure",mb:"8px",children:j("Only reuse a name from other social media if you're OK with people viewing your wallet. You can't change your name once you click Confirm.")}),Object(U.jsx)("label",{htmlFor:"checkbox",style:{display:"block",cursor:"pointer",marginBottom:"24px"},children:Object(U.jsxs)(E.ab,{alignItems:"center",children:[Object(U.jsx)("div",{style:{flex:"none"},children:Object(U.jsx)(E.E,{id:"checkbox",scale:"sm",checked:n,onChange:function(){return c(!n)}})}),Object(U.jsx)(E.pc,{ml:"8px",children:j("I understand that people can view my wallet if they know my username")})]})}),Object(U.jsx)(E.t,{onClick:$,disabled:!y||K||I||!n,children:j("Confirm")})]})}),Object(U.jsx)(E.t,{onClick:H,disabled:!y||!K,id:"completeProfileCreation",children:j("Complete Profile")}),!X&&Object(U.jsx)(E.pc,{color:"failure",mt:"16px",children:j("A minimum of %num% CAKE is required",{num:Object(R.formatUnits)(q)})})]})},rt=function(){var e=Object(D.b)().t,t=Object(u.useContext)(H),n=t.isInitialized,c=t.currentStep;return Object(b.c)().account?n?0===c?Object(U.jsx)(fe,{}):1===c?Object(U.jsx)(ve,{}):2===c?Object(U.jsx)(Ce,{}):3===c?Object(U.jsx)(ct,{}):null:Object(U.jsx)("div",{children:e("Loading...")}):Object(U.jsx)(V,{})};t.default=function(){var e=Object(b.c)().account,t=Object(p.c)(),n=t.isInitialized,c=t.isLoading,r=t.hasProfile;return w(),function(){var e=Object(x.b)();Object(u.useEffect)((function(){e(Object(h.c)())}),[e])}(),!n||c?Object(U.jsx)(f.a,{}):e&&r?Object(U.jsx)(d.a,{to:"".concat(g.a,"/profile/").concat(e.toLowerCase())}):Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(K,{children:Object(U.jsxs)(j.b,{children:[Object(U.jsx)(B,{}),Object(U.jsx)(rt,{})]})})})}},947:function(e,t,n){"use strict";var c=n(3),r=n.n(c),a=n(12),i=n(10),o=n(5),s=n(0),l=n(108),u=n(84),b=n(224),d=n(20),j={approvalState:"idle",confirmState:"idle"},p=function(e,t){switch(t.type){case"requires_approval":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"success"});case"approve_sending":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"loading"});case"approve_receipt":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"success"});case"approve_error":return Object(o.a)(Object(o.a)({},e),{},{approvalState:"fail"});case"confirm_sending":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"loading"});case"confirm_receipt":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"success"});case"confirm_error":return Object(o.a)(Object(o.a)({},e),{},{confirmState:"fail"});default:return e}};t.a=function(e){var t=e.onApprove,n=e.onConfirm,c=e.onRequiresApproval,o=e.onSuccess,f=void 0===o?l.noop:o,O=e.onApproveSuccess,m=void 0===O?l.noop:O,x=Object(d.b)().t,h=Object(u.c)().account,v=Object(s.useReducer)(p,j),g=Object(i.a)(v,2),S=g[0],y=g[1],C=Object(s.useRef)(c),k=Object(b.a)().toastError;return Object(s.useEffect)((function(){h&&C.current&&C.current().then((function(e){e&&y({type:"requires_approval"})}))}),[h,C,y]),{isApproving:"loading"===S.approvalState,isApproved:"success"===S.approvalState,isConfirming:"loading"===S.confirmState,isConfirmed:"success"===S.confirmState,hasApproveFailed:"fail"===S.approvalState,hasConfirmFailed:"fail"===S.confirmState,handleApprove:function(){var e=Object(a.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,y({type:"approve_sending"}),e.next=7,n.wait();case 7:(c=e.sent).status&&(y({type:"approve_receipt"}),m({state:S,receipt:c})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),y({type:"approve_error"}),k(x("Error"),x("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),handleConfirm:function(){var e=Object(a.a)(r.a.mark((function e(){var t,c,a,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},y({type:"confirm_sending"}),e.prev=2,e.next=5,n(t);case 5:return c=e.sent,e.next=8,c.wait();case 8:(a=e.sent).status&&(y({type:"confirm_receipt"}),f({state:S,receipt:a})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),y({type:"confirm_error"}),k(x("Error"),x("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()}}},949:function(e,t,n){"use strict";var c,r=n(13),a=(n(0),n(7)),i=n(2),o=n(299),s=n(1),l=Object(a.e)(o.b)(c||(c=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])));t.a=function(){return Object(s.jsx)(l,{children:Object(s.jsx)(i.ac,{})})}},956:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c,r,a,i,o,s=n(13),l=(n(0),n(7)),u=n(2),b=n(20),d=n(1);!function(e){e.ROW="row",e.SEQUENTIAL="sequential"}(o||(o={}));var j=l.e.div(c||(c=Object(s.a)(["\n  align-items: center;\n  display: grid;\n  grid-template-columns: 1fr;\n  justify-content: center;\n\n  "," {\n    grid-template-columns: 1fr 24px 1fr;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),p=Object(l.e)(u.t)(r||(r=Object(s.a)(["\n  width: 100%;\n\n  "," {\n    min-width: 160px;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),f={width:"24px",color:"textDisabled"},O=Object(l.e)(u.K).attrs(f)(a||(a=Object(s.a)(["\n  display: none;\n\n  "," {\n    display: block;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),m=Object(l.e)(u.I).attrs(f)(i||(i=Object(s.a)(["\n  display: block;\n\n  "," {\n    display: none;\n  }\n"])),(function(e){return e.theme.mediaQueries.md})),x=Object(d.jsx)(u.i,{spin:!0,color:"currentColor"});t.b=function(e){var t=e.isApproveDisabled,n=e.isApproving,c=e.isConfirming,r=e.isConfirmDisabled,a=e.onApprove,i=e.onConfirm,s=e.buttonArrangement,l=void 0===s?o.ROW:s,f=e.confirmLabel,h=e.confirmId,v=Object(b.b)().t,g=null!==f&&void 0!==f?f:v("Confirm");return l===o.ROW?Object(d.jsxs)(j,{children:[Object(d.jsx)(u.p,{children:Object(d.jsx)(p,{disabled:t,onClick:a,endIcon:n?x:void 0,isLoading:n,children:v(n?"Enabling":"Enable")})}),Object(d.jsxs)(u.ab,{justifyContent:"center",children:[Object(d.jsx)(O,{}),Object(d.jsx)(m,{})]}),Object(d.jsx)(u.p,{children:Object(d.jsx)(p,{id:h,onClick:i,disabled:r,isLoading:c,endIcon:c?x:void 0,children:c?v("Confirming"):g})})]}):Object(d.jsx)(d.Fragment,{children:t?Object(d.jsx)(u.p,{children:Object(d.jsx)(p,{id:h,onClick:i,disabled:r,isLoading:c,endIcon:c?x:void 0,children:c?v("Confirming"):g})}):Object(d.jsx)(u.p,{children:Object(d.jsx)(p,{onClick:a,endIcon:n?x:void 0,isLoading:n,children:v(n?"Enabling":"Enable")})})})}},973:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var c=n(0),r=n(27),a=n(116),i=n(458),o=function(e){var t=Object(r.c)((function(t){return t.teams.data[e]})),n=Object(a.b)();return Object(c.useEffect)((function(){n(Object(i.b)(e))}),[e,n]),t},s=function(){var e=Object(r.c)((function(e){return e.teams})),t=e.isInitialized,n=e.isLoading,o=e.data,s=Object(a.b)();return Object(c.useEffect)((function(){s(Object(i.c)())}),[s]),{teams:o,isInitialized:t,isLoading:n}}},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(21),r=n(16);function a(e,t){Object(r.a)(2,arguments);var n=Object(c.default)(e),a=Object(c.default)(t);return n.getTime()-a.getTime()}},997:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(21),r=n(16);function a(e,t){Object(r.a)(2,arguments);var n=Object(c.default)(e),a=Object(c.default)(t),i=n.getTime()-a.getTime();return i<0?-1:i>0?1:i}}}]);